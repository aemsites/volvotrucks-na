{"version":3,"file":"620.js","mappings":"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","sources":["webpack:///./templates/magazine/magazine.js"],"sourcesContent":["import { getMetadata, createOptimizedPicture } from '../../scripts/aem.js';\nimport { createElement, decorateIcons, getLocale } from '../../scripts/common.js';\n\nasync function buildArticleHero(container) {\n  const title = getMetadata('og:title');\n  const author = getMetadata('author');\n  const pubdate = getMetadata('publish-date');\n  const readtime = getMetadata('readingtime');\n  const headPic = getMetadata('og:image');\n  const headAlt = getMetadata('og:image:alt');\n\n  const row = createElement('div', { classes: ['row', 'size-img'] });\n  const headImg = createOptimizedPicture(headPic, headAlt);\n  const content = createElement('div', { classes: 'content' });\n  const topDetails = createElement('div', { classes: ['top-details', 'hide-desktop'] });\n  content.append(topDetails);\n  const calendarIcon = createElement('i', { classes: ['fa', 'fa-calendar'] });\n  topDetails.append(calendarIcon);\n  const pubDateSpan = createElement('span', { classes: 'date' });\n  pubDateSpan.innerHTML = new Intl.DateTimeFormat(getLocale()).format(new Date(pubdate));\n  topDetails.append(pubDateSpan);\n\n  const timeIcon = createElement('i', { classes: ['fa', 'fa-clock-o'] });\n  topDetails.append(timeIcon);\n  const timeSpan = createElement('span', { classes: 'time' });\n  timeSpan.innerHTML = readtime;\n  topDetails.append(timeSpan);\n\n  const titleH1 = createElement('h1', { classes: 'title-sentence' });\n  titleH1.innerText = title.includes('|') ? title.split('|')[0] : title;\n  content.append(titleH1);\n  const details = createElement('div', { classes: 'details' });\n  content.append(details);\n\n  const userIcon = createElement('i', { classes: ['fa', 'fa-user'] });\n  details.append(userIcon);\n  const authorSpan = createElement('span', { classes: 'author' });\n  authorSpan.innerHTML = author;\n  details.append(authorSpan);\n\n  const calendarIconClone = calendarIcon.cloneNode();\n  calendarIconClone.classList.add('hide-mobile');\n  details.append(calendarIconClone);\n  const pubDateSpanClone = pubDateSpan.cloneNode(true);\n  pubDateSpanClone.classList.add('hide-mobile');\n  details.append(pubDateSpanClone);\n  const timeIconClone = timeIcon.cloneNode();\n  timeIconClone.classList.add('hide-mobile');\n  details.append(timeIconClone);\n  const timeSpanClone = timeSpan.cloneNode(true);\n  timeSpanClone.classList.add('hide-mobile');\n  details.append(timeSpanClone);\n\n  // row\n  row.append(headImg);\n  row.append(content);\n  const section = createElement('div', { classes: ['section', 'template', 'article-hero'] });\n  section.insertAdjacentElement('afterbegin', row);\n  container.insertAdjacentElement('afterbegin', section);\n}\n\nexport default async function decorate(doc) {\n  const container = doc.querySelector('main');\n  buildArticleHero(container);\n\n  const classes = ['section', 'template', 'article-sidebar', 'loading'];\n  const sidebarSection = createElement('div', { classes, props: { id: 'sidebar' } });\n  // topics\n  const topicsSidebar = createElement('div', { classes: 'topics' });\n  sidebarSection.append(topicsSidebar);\n  const topicsHeading = createElement('p');\n  topicsHeading.textContent = 'Topics in this article';\n  topicsSidebar.append(topicsHeading);\n  const topics = getMetadata('article:tag').split(',');\n  const topicsList = createElement('ul', { classes: 'topic-list' });\n  topics.forEach((topic) => {\n    const topicItem = createElement('li');\n    topicItem.innerHTML = topic;\n    topicsList.appendChild(topicItem);\n  });\n  topicsSidebar.append(topicsList);\n\n  // share\n  const shareItems = [\n    ['envelope', 'Share via email', 'mailto:?body='],\n    ['twitter', 'Share on Twitter', 'https://twitter.com/intent/tweet?url='],\n    ['linkedin', 'Share on LinkedIn', 'https://www.linkedin.com/sharing/share-offsite/?url='],\n    ['facebook', 'Share on Facebook', 'https://www.facebook.com/sharer/sharer.php?u='],\n  ];\n  const shareSidebar = createElement('div', { classes: 'share' });\n  const shareHeading = createElement('p');\n  shareHeading.textContent = 'Share this article';\n  shareSidebar.append(shareHeading);\n  const shareList = createElement('div', { classes: 'share-icons' });\n  shareItems.forEach((share) => {\n    const icon = createElement('i', { classes: ['fa', `fa-${share[0]}`] });\n    const shareItem = createElement('button', share[0], { title: share[1], type: 'button' });\n    shareItem.addEventListener('click', () => {\n      window.open(`${share[2]}${window.location.href}`, '_blank');\n    });\n    shareItem.append(icon);\n    shareList.append(shareItem);\n  });\n  shareSidebar.append(shareList);\n  sidebarSection.append(shareSidebar);\n\n  // subscribe\n  const subscribeSidebar = createElement('div', { classes: 'subscribe' });\n  const button = createElement('a', { classes: 'cta', props: { href: '#form59' } });\n  button.textContent = 'Subscribe';\n  const arrowIcon = createElement('i', { classes: ['fa', 'fa-angle-right'] });\n  button.append(arrowIcon);\n  subscribeSidebar.append(button);\n  sidebarSection.append(subscribeSidebar);\n\n  let sidebarPreviousSection;\n  let sectionFound = false;\n  const sections = [...doc.querySelectorAll('.section')];\n  while (!sectionFound && sections.length > 0) {\n    const section = sections.pop();\n    if (!sidebarPreviousSection) {\n      sidebarPreviousSection = section;\n    } else if (section.classList.contains('related-articles-container')) {\n      sidebarPreviousSection = section;\n    } else {\n      sectionFound = true;\n    }\n  }\n  sidebarPreviousSection.insertAdjacentElement('beforebegin', sidebarSection);\n  decorateIcons(doc);\n  // show hidden sidebar until all sections are loaded to improve CLS\n  const sectionObserver = new MutationObserver(() => {\n    const pendingSection = doc.querySelector('main > .section[data-section-status=\"initialized\"],main > .section[data-section-status=\"loading\"]');\n    if (!pendingSection) {\n      sidebarSection.classList.remove('loading');\n      sectionObserver.disconnect();\n    }\n  });\n  doc.querySelectorAll('main > .section[data-section-status]').forEach((section) => {\n    sectionObserver.observe(section, { attributeFilter: ['data-section-status'] });\n  });\n}\n"],"names":["async","buildArticleHero","container","title","author","pubdate","readtime","headPic","headAlt","row","classes","headImg","content","topDetails","append","calendarIcon","pubDateSpan","innerHTML","Intl","DateTimeFormat","format","Date","timeIcon","timeSpan","titleH1","innerText","includes","split","details","userIcon","authorSpan","calendarIconClone","cloneNode","classList","add","pubDateSpanClone","timeIconClone","timeSpanClone","section","insertAdjacentElement","decorate","doc","querySelector","sidebarSection","props","id","topicsSidebar","topicsHeading","textContent","topics","topicsList","forEach","topic","topicItem","appendChild","shareSidebar","shareHeading","shareList","share","icon","shareItem","type","addEventListener","window","open","location","href","subscribeSidebar","button","arrowIcon","sidebarPreviousSection","sectionFound","sections","querySelectorAll","length","pop","contains","sectionObserver","MutationObserver","remove","disconnect","observe","attributeFilter"],"sourceRoot":""}