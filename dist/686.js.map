{"version":3,"file":"686.js","mappings":"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","sources":["webpack:///./scripts/validate-elements.js","webpack:///./common/snackbar/snackbar.js"],"sourcesContent":["import { formatStringToArray, TOOLS_CONFIGS } from './common.js';\nimport { loadCSS } from './aem.js';\nimport showSnackbar from '../common/snackbar/snackbar.js';\n\nloadCSS(`${window.hlx.codeBasePath}/common/snackbar/snackbar.css`);\n\nconst { v1SectionClasses = false, v2SectionClasses = false, v1AllowedBlocks = false, v2AllowedBlocks = false } = TOOLS_CONFIGS;\n\nconst formattedV1SectionClasses = formatStringToArray(v1SectionClasses);\nconst formattedV2SectionClasses = formatStringToArray(v2SectionClasses);\nconst formattedV1AllowedBlocks = formatStringToArray(v1AllowedBlocks);\nconst formattedV2AllowedBlocks = formatStringToArray(v2AllowedBlocks);\n\nconst allowlist = [''];\n\nconst isV2 = document.documentElement.classList.contains('redesign-v2');\nconst pageText = isV2 ? 'redesign page' : 'legacy page';\nconst targetNode = document.body;\nconst config = { childList: true, subtree: false };\n\nconst countOccurrences = (elements, getName) => {\n  const counts = {};\n  elements.forEach((element) => {\n    const name = getName(element);\n    if (name) {\n      if (counts[name]) {\n        counts[name] += 1;\n      } else {\n        counts[name] = 1;\n      }\n    }\n  });\n  return counts;\n};\n\nconst collectViolations = (counts, checkFn) => {\n  const violations = [];\n  Object.keys(counts).forEach((name) => {\n    if (checkFn(name)) {\n      violations.push(`<span style=\"white-space: nowrap\">${name}${counts[name] > 1 ? ` (${counts[name]}\\xD7)` : ''}</span>`);\n    }\n  });\n  return violations;\n};\n\nconst checkBlocks = () => {\n  const blocks = document.querySelectorAll('[data-block-name]');\n  const blockCounts = countOccurrences(blocks, (block) => block.getAttribute('data-block-name'));\n  const checkFn = (blockName) => {\n    if (isV2) {\n      return !blockName.startsWith('v2-') && !formattedV2AllowedBlocks.includes(blockName);\n    }\n    return blockName.startsWith('v2-') && !formattedV1AllowedBlocks.includes(blockName);\n  };\n  return collectViolations(blockCounts, checkFn);\n};\n\nconst checkSections = () => {\n  const sections = targetNode.querySelectorAll(':scope > main > .section');\n  const sectionCounts = {};\n\n  sections.forEach((section) => {\n    const sectionClasses = Array.from(section.classList);\n    const checkList = isV2 ? formattedV1SectionClasses : formattedV2SectionClasses;\n\n    if (checkList.length === 0) {\n      return;\n    }\n\n    sectionClasses.forEach((className) => {\n      if (checkList.includes(className)) {\n        const cleanedClassName = className.startsWith('section--') ? className.replace('section--', '') : className;\n        if (sectionCounts[cleanedClassName]) {\n          sectionCounts[cleanedClassName] += 1;\n        } else {\n          sectionCounts[cleanedClassName] = 1;\n        }\n      }\n    });\n  });\n\n  const checkFn = (className) => !allowlist.includes(className);\n  return collectViolations(sectionCounts, checkFn);\n};\n\nconst logCombinedViolations = (blockViolations, sectionViolations) => {\n  const allMessages = [];\n\n  if (sectionViolations.length > 0) {\n    const sectionMessage = `Found unsupported section classes on this ${pageText}: ${sectionViolations.join(', ')}`;\n    allMessages.push(sectionMessage);\n  }\n\n  if (blockViolations.length > 0) {\n    const blockMessage = `Found unsupported block${blockViolations.length > 1 ? 's' : ''} on this ${pageText}: ${blockViolations.join(', ')}`;\n    allMessages.push(blockMessage);\n  }\n\n  if (allMessages.length > 0) {\n    showSnackbar(allMessages.join('. '), 'error', 'center', 'bottom', false, true, 15000, true);\n  }\n};\n\nconst performDomCheck = () => {\n  const blockViolations = checkBlocks();\n  const sectionViolations = checkSections();\n  logCombinedViolations(blockViolations, sectionViolations);\n};\n\nconst existingElement = document.querySelector('body > helix-sidekick');\nif (existingElement) {\n  performDomCheck();\n} else {\n  const callback = (mutationsList, observer) => {\n    mutationsList.forEach((mutation) => {\n      if (mutation.type === 'childList') {\n        mutation.addedNodes.forEach((node) => {\n          if (node.nodeType === 1 && node.tagName.toLowerCase() === 'helix-sidekick') {\n            performDomCheck();\n            observer.disconnect();\n          }\n        });\n      }\n    });\n  };\n\n  const observer = new MutationObserver(callback);\n  observer.observe(targetNode, config);\n}\n","import { createElement, decorateIcons, getTextLabel } from '../../scripts/common.js';\n\nconst componentName = 'snackbar';\n\n/**\n * Initializes the snackbar container with the specified position.\n *\n * @param {('left'|'center'|'right')} [positionX='center'] - The horizontal position of the snackbar\n * @param {('top'|'bottom')} [positionY='bottom'] - The vertical position of the snackbar\n * @returns {HTMLElement} The created snackbar container element\n */\nconst initSnackbarContainer = (positionX, positionY) => {\n  const positionMapping = {\n    left: 'start',\n    center: 'center',\n    right: 'end',\n    top: 'start',\n    bottom: 'end',\n  };\n\n  const x = positionMapping[positionX] || 'center';\n  const y = positionMapping[positionY] || 'end';\n\n  const container = createElement('section', {\n    classes: [`${componentName}-container`],\n    props: { style: `--snackbar-position: ${x} ${y}; --snackbar-animation: slide-from-${y};` },\n  });\n  document.body.appendChild(container);\n  return container;\n};\n\nconst handleCloseButtonClick = (event) => {\n  const snackbar = event.target.closest(`.${componentName}`);\n  if (snackbar) {\n    removeSnackbar(snackbar);\n  }\n};\n\nexport const removeSnackbar = (snackbar) => {\n  const container = snackbar.parentNode;\n  const closeButton = snackbar.querySelector(`.${componentName}__close-button`);\n  snackbar.classList.add(`${componentName}--hide`);\n\n  const animationEndHandler = () => {\n    container.removeChild(snackbar);\n    snackbar.removeEventListener('animationend', animationEndHandler);\n  };\n\n  const style = window.getComputedStyle(snackbar);\n  const animationDuration = parseFloat(style.animationDuration);\n\n  if (animationDuration > 0) {\n    snackbar.addEventListener('animationend', animationEndHandler);\n  } else {\n    container.removeChild(snackbar);\n  }\n\n  if (closeButton) {\n    closeButton.removeEventListener('click', handleCloseButtonClick);\n  }\n};\n\nconst createSnackbar = (text, type, buttonsBelow, closeButton) => {\n  const getIcon = () => {\n    switch (type) {\n      case 'error':\n        return 'icon-remove';\n      case 'success':\n        return 'icon-checkmark-circle';\n      default:\n        return '';\n    }\n  };\n\n  const icon = getIcon();\n\n  const snackbar = document.createRange().createContextualFragment(`\n    <output role=\"status\" class=\"${componentName} ${type ? `${componentName}--${type}` : ''} ${buttonsBelow ? `${componentName}--buttons-below` : ''}\">\n      ${type && icon ? `<span class=\"icon ${icon}\"></span>` : ''}\n      <p>${text}</p>\n      ${\n        closeButton\n          ? `<button\n                          aria-label=\"${getTextLabel('Dismiss message')}\"\n                          class=\"${componentName}__close-button\"\n                          aria-controls=\"${componentName}\"\n                        >\n                          <span class=\"icon icon-close\" />\n                        </button>`\n          : ''\n      }\n    </output>\n  `);\n\n  if (closeButton) {\n    snackbar.querySelector(`.${componentName}__close-button`).addEventListener('click', handleCloseButtonClick);\n  }\n  decorateIcons(snackbar);\n  return snackbar;\n};\n\nconst addSnackbar = (container, snackbar) => {\n  if (container.children.length) {\n    removeSnackbar(container.children[0]);\n  }\n  container.appendChild(snackbar);\n};\n\n/**\n * Displays a snackbar notification with the specified text, type, and configuration options.\n *\n * @param {string} text - The text to display in the snackbar\n * @param {(''|'error'|'success')} [type=''] - The type of the snackbar\n * @param {('left'|'center'|'right')} [positionX='center'] - The horizontal position of the snackbar\n * @param {('top'|'bottom')} [positionY='bottom'] - The vertical position of the snackbar\n * @param {boolean} [buttonsBelow=false] - Whether to display buttons below the snackbar\n * @param {boolean} [closeButton=false] - Whether to display a close button on the snackbar\n * @param {number} [duration=5000] - The duration in milliseconds for which the snackbar\n * @param {boolean} [persistent=false] - Whether the snackbar should be stay on screen until closed\n */\nexport default function showSnackbar(\n  text,\n  type,\n  positionX = 'center',\n  positionY = 'bottom',\n  buttonsBelow = false,\n  closeButton = false,\n  duration = 5000,\n  persistent = false,\n) {\n  const container = document.querySelector(`.${componentName}-container`) || initSnackbarContainer(positionX, positionY);\n  const snackbar = createSnackbar(text, type, buttonsBelow, closeButton);\n  addSnackbar(container, snackbar);\n\n  if (!persistent) {\n    setTimeout(() => {\n      if (container.children.length) {\n        removeSnackbar(container.children[0]);\n      }\n    }, duration);\n  }\n}\n"],"names":["window","hlx","codeBasePath","v1SectionClasses","v2SectionClasses","v1AllowedBlocks","v2AllowedBlocks","formattedV1SectionClasses","formattedV2SectionClasses","formattedV1AllowedBlocks","formattedV2AllowedBlocks","allowlist","isV2","document","documentElement","classList","contains","pageText","targetNode","body","config","childList","subtree","countOccurrences","elements","getName","counts","forEach","element","name","collectViolations","checkFn","violations","Object","keys","push","checkBlocks","blocks","querySelectorAll","blockCounts","block","getAttribute","blockName","startsWith","includes","checkSections","sections","sectionCounts","section","sectionClasses","Array","from","checkList","length","className","cleanedClassName","replace","logCombinedViolations","blockViolations","sectionViolations","allMessages","sectionMessage","join","blockMessage","performDomCheck","querySelector","callback","mutationsList","observer","mutation","type","addedNodes","node","nodeType","tagName","toLowerCase","disconnect","MutationObserver","observe","componentName","initSnackbarContainer","positionX","positionY","positionMapping","left","center","right","top","bottom","x","y","container","classes","props","style","appendChild","handleCloseButtonClick","event","snackbar","target","closest","removeSnackbar","parentNode","closeButton","add","animationEndHandler","removeChild","removeEventListener","getComputedStyle","parseFloat","animationDuration","addEventListener","createSnackbar","text","buttonsBelow","icon","getIcon","createRange","createContextualFragment","addSnackbar","children","showSnackbar","duration","persistent","setTimeout"],"sourceRoot":""}