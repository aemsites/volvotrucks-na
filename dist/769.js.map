{"version":3,"file":"769.js","mappings":"gQAGA,MACMA,EAAW,eACXC,EAAQ,CACZC,UAAW,aACXC,SAAU,YACVC,IAAK,MACLC,MAAO,QACPC,QAAS,UACTC,QAAS,UACTC,UAAW,YACXC,OAAQ,SACRC,SAAU,aAONC,EAAcC,GACX,gBAAgBA,IAGnBC,EAR0B,EAACC,EAAe,KACvCA,EAAaC,IAAKC,IAAS,QAAa,gBAAgBA,MAO9CC,CAtBG,CAAC,gBAAiB,SAAU,UAwB5CC,EAAc,mBACJlB,iCACEA,yCACEA,YAAkB,QAAaW,EAAWV,EAAMC,sDACrCF,+FACVA,oBAA2BA,kEAE9BA,yCACEA,iBAAuB,QAAaW,EAAWV,EAAME,qDAC1CH,mGACVA,oBAA2BA,kEAE9BA,yCACEA,WAAiB,QAAaW,EAAWV,EAAMG,gDACpCJ,uFACVA,oBAA2BA,kEAE9BA,yCACEA,aAAmB,QAAaW,EAAWV,EAAMI,mDACrCL,2FACXA,oBAA2BA,kEAE9BA,8FAGAA,yCACEA,eAAqB,QAAaW,EAAWV,EAAMM,oDACxCP,+FACVA,oBAA2BA,0EAGhCA,mGAEmBA,oFACfA,2BACV,QAAaW,EAAWV,EAAMO,mDAEnBR,oBAA2BA,kEAE9BA,sDAIFA,mEACmC,QAAaW,EAAWV,EAAMQ,qDAChDT,yBAA+B,QAAaW,EAAWV,EAAMS,6BAIxFS,EAAqB,CAACC,EAAOC,GAAiB,KAClD,MAAMC,EAAiBF,EAAMG,cAAcC,cAAc,aAAaxB,oBAEtE,GAAIsB,EAAgB,CAClB,MACMG,EAD0BC,IAAIC,SAAS,4BACMN,EAAiB,gBAAkB,WAChFO,EAAYR,EAAMG,cAAcC,cAAc,UAAUC,OAAuBL,EAErFE,EAAeO,UAAYD,EAAYR,EAAMU,kBAAoB,GACjER,EAAeS,UAAUH,EAAY,SAAW,OAAO,GAAG5B,2BAC5D,GAGWgC,EAAWC,MAAOC,IAC7BA,EAAKC,aAAa,aAAc,cAEhC,MAAMC,EAAwBF,EAAKV,cAAc,oBACjD,GAAIY,EAAuB,CACzB,MAAMC,QAAuB,OAAkB,CAC7CrC,WACAsC,MAAO3B,EAAWV,EAAMK,SACxBO,aACA0B,KAAMtC,EAAMK,QACZkC,WAAW,EACXC,SAAU,CAAC,WAEbL,EAAsBM,YAAYL,EACpC,CAEe,IAAIH,EAAKS,iBAAiB,UAElCC,QAASxB,IACdA,EAAMyB,iBAAiB,QAAS,KAC9B1B,EAAmBC,KAGrBA,EAAMyB,iBAAiB,WAAY,KACjC1B,EAAmBC,KAGrBD,EAAmBC,MAIV0B,EAAWb,MAAOC,EAAMa,KACpB,IAAIb,EAAKS,iBAAiB,kBAElCC,QAASI,GAAO7B,EAAmB6B,GAAI,IAE1Cd,EAAKe,uBACDF,EAAab,IAIvB,I","sources":["webpack:///./blocks/v2-forms/forms/event-notify.js"],"sourcesContent":["import { getTextLabel } from '../../../scripts/common.js';\nimport { getCustomDropdown } from '../../../common/custom-dropdown/custom-dropdown.js';\n\nconst COUNTRY_CODES = ['united_states', 'canada', 'other'];\nconst formName = 'event-notify';\nconst TYPES = {\n  firstName: 'first_name',\n  lastName: 'last_name',\n  zip: 'zip',\n  email: 'email',\n  country: 'country',\n  company: 'company',\n  agreement: 'agreement',\n  notify: 'notify',\n  addEvent: 'add_event',\n};\n\nconst mapCountryCodesToLabels = (countryCodes = []) => {\n  return countryCodes.map((code) => getTextLabel(`event_notify:${code}`));\n};\n\nconst getTypeKey = (type) => {\n  return `event_notify:${type}`;\n};\n\nconst optionList = mapCountryCodesToLabels(COUNTRY_CODES);\n\nconst formContent = `\n  <div class=\"${formName}__wrapper\">\n    <div class=\"${formName}__field-wrapper\">\n      <label for=\"${formName}-name\">${getTextLabel(getTypeKey(TYPES.firstName))}*</label>\n      <input type=\"text\" id=\"${formName}-name\" name=\"first_name\" autocomplete=\"off\" placeholder=\"\" required />\n      <span class=\"${formName}__error-message ${formName}__error-message--hidden\"></span>\n    </div>\n    <div class=\"${formName}__field-wrapper\">\n      <label for=\"${formName}-last-name\">${getTextLabel(getTypeKey(TYPES.lastName))}*</label>\n      <input type=\"text\" id=\"${formName}-last-name\" name=\"last_name\" autocomplete=\"off\" placeholder=\"\" required />\n      <span class=\"${formName}__error-message ${formName}__error-message--hidden\"></span>\n    </div>\n    <div class=\"${formName}__field-wrapper\">\n      <label for=\"${formName}-zip\">${getTextLabel(getTypeKey(TYPES.zip))}*</label>\n      <input type=\"text\" id=\"${formName}-zip\" name=\"zip\" autocomplete=\"off\" placeholder=\"\" required />\n      <span class=\"${formName}__error-message ${formName}__error-message--hidden\"></span>\n    </div>\n    <div class=\"${formName}__field-wrapper\">\n      <label for=\"${formName}-email\">${getTextLabel(getTypeKey(TYPES.email))}*</label>\n      <input type=\"email\" id=\"${formName}-email\" name=\"email\" autocomplete=\"off\" placeholder=\"\" required />\n      <span class=\"${formName}__error-message ${formName}__error-message--hidden\"></span>\n    </div>\n    <div class=\"${formName}__field-wrapper\">\n      <div class=\"custom-dropdown\"></div>\n    </div>\n    <div class=\"${formName}__field-wrapper\">\n      <label for=\"${formName}-company\">${getTextLabel(getTypeKey(TYPES.company))}*</label>\n      <input type=\"text\" id=\"${formName}-company\" name=\"company\" autocomplete=\"off\" placeholder=\"\" required />\n      <span class=\"${formName}__error-message ${formName}__error-message--hidden\"></span>\n    </div>\n  </div>\n  <div class=\"${formName}__agreement-section\">\n    <div class=\"checkbox-with-label\">\n      <input type=\"checkbox\" id=\"${formName}-agreement\" name=\"marketing_consent\" value=\"true\" required/>\n      <label for=\"${formName}-agreement\">\n        ${getTextLabel(getTypeKey(TYPES.agreement))}\n      </label>\n      <span class=\"${formName}__error-message ${formName}__error-message--hidden\"></span>\n    </div>\n    <div class=\"${formName}__policy\">\n    </div>\n  </div>\n\n  <div class=\"${formName}__buttons\">\n    <button class=\"button primary\" type=\"submit\">${getTextLabel(getTypeKey(TYPES.notify))}</button>\n    <a class=\"button secondary ${formName}__add-event-button\">${getTextLabel(getTypeKey(TYPES.addEvent))}</a>\n  </div>\n`;\n\nconst checkFieldValidity = (field, useUserInvalid = true) => {\n  const errorMessageEl = field.parentElement.querySelector(`:scope > .${formName}__error-message`);\n\n  if (errorMessageEl) {\n    const isSupportingUserInvalid = CSS.supports('selector(:user-invalid)');\n    const invalidSelector = isSupportingUserInvalid && useUserInvalid ? ':user-invalid' : ':invalid';\n    const isInvalid = field.parentElement.querySelector(`:scope ${invalidSelector}`) === field;\n\n    errorMessageEl.innerText = isInvalid ? field.validationMessage : '';\n    errorMessageEl.classList[isInvalid ? 'remove' : 'add'](`${formName}__error-message--hidden`);\n  }\n};\n\nexport const postLoad = async (form) => {\n  form.setAttribute('novalidate', 'novalidate');\n\n  const formHasCustomDropdown = form.querySelector('.custom-dropdown');\n  if (formHasCustomDropdown) {\n    const customDropDown = await getCustomDropdown({\n      formName,\n      label: getTypeKey(TYPES.country),\n      optionList,\n      name: TYPES.country,\n      mandatory: true,\n      variants: ['thick'],\n    });\n    formHasCustomDropdown.replaceWith(customDropDown);\n  }\n\n  const fields = [...form.querySelectorAll('input')];\n\n  fields.forEach((field) => {\n    field.addEventListener('input', () => {\n      checkFieldValidity(field);\n    });\n\n    field.addEventListener('focusout', () => {\n      checkFieldValidity(field);\n    });\n\n    checkFieldValidity(field);\n  });\n};\n\nexport const onSubmit = async (form, handleSubmit) => {\n  const fields = [...form.querySelectorAll('input, select')];\n\n  fields.forEach((el) => checkFieldValidity(el, false));\n\n  if (form.checkValidity()) {\n    await handleSubmit(form);\n  }\n};\n\nexport default formContent;\n"],"names":["formName","TYPES","firstName","lastName","zip","email","country","company","agreement","notify","addEvent","getTypeKey","type","optionList","countryCodes","map","code","mapCountryCodesToLabels","formContent","checkFieldValidity","field","useUserInvalid","errorMessageEl","parentElement","querySelector","invalidSelector","CSS","supports","isInvalid","innerText","validationMessage","classList","postLoad","async","form","setAttribute","formHasCustomDropdown","customDropDown","label","name","mandatory","variants","replaceWith","querySelectorAll","forEach","addEventListener","onSubmit","handleSubmit","el","checkValidity"],"sourceRoot":""}